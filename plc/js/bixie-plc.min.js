/*! bixie-plc-1.0.0 - Matthijs Alles - Bixie 07-09-2014 1:26:26 */
(function(t){"use strict";var s;jQuery&&jQuery.UIkit&&(s=t(jQuery,jQuery.UIkit)),"function"==typeof define&&define.amd&&define("uikit-bixdashboard",["uikit"],function(){return s||t(jQuery,jQuery.UIkit)})})(function(t,s){"use strict";return s.component("bixdashboard",{defaults:{debug:!1,ajaxUrl:"Tags.htm",interval:1e3,widgets:{tact:{type:"progress",selector:"#tactProgress"},shelf:{type:"target",selector:"#shelfTarget"},shift:{type:"progress",selector:"#shiftProgress"}}},init:function(){var e=this;t("#tactProgress"),t("#shelfTarget"),t("#shiftProgress"),this.form=this.find("form"),this.datetimes=this.find("[data-bix-datetime]"),this.errorMessage=this.find("[data-bix-error]"),e.widgets={},t.each(this.options.widgets,function(i){var r=t(this.selector);e.widgets[i]=s["bix"+this.type](r,s.Utils.options(r.attr("data-bix-"+this.type)))}),setInterval(function(){e.getData()},this.options.interval),e.getData()},getData:function(){var s=this;t.ajax({type:"GET",dataType:"json",url:this.options.ajaxUrl,cache:!1,data:s.form.serialize()}).done(function(e){s.datetimes.text(e.tags.now),console.log(e.tags.andon),e.tags.andon?s.errorMessage.show().find(".content").text(e.tags.andon):s.errorMessage.hide().find(".content").text(""),t.each(s.widgets,function(){this.setData(e)})}).fail(function(){}).always(function(e){s.options.debug&&(console.info("Data ververst:"),console.log(e.tags)),t.each(s.widgets,function(){this.reset(e)})})}}),s.ready(function(e){t("[data-bix-dashboard]",e).each(function(){var e=t(this);e.data("bixdashboard")||s.bixdashboard(e,s.Utils.options(e.attr("data-bix-dashboard")))})}),t.fn.ukbixdashboard}),function(t){"use strict";var s;jQuery&&jQuery.UIkit&&(s=t(jQuery,jQuery.UIkit)),"function"==typeof define&&define.amd&&define("uikit-bixprogress",["uikit"],function(){return s||t(jQuery,jQuery.UIkit)})}(function(t,s){"use strict";return s.component("bixprogress",{defaults:{type:"tact",suffix:" sec",blink:0,keys:{tact:{key:"tact",max:"tactTijd",marge:"tactMarge",reset:"tactReset"},shift:{key:"shift",max:"shiftLengte",reset:"shiftReset"}}},init:function(){var s=this;this.blinker=!1,this.blinkState=!0,this.progress=this.find("div.uk-progress-bar"),this.alertEl=this.find("div.uk-alert"),this.resetInput=this.find("input[name="+this.options.keys[this.options.type].reset+"]"),this.resetButton=this.find("button").click(function(){s.resetInput.val(1),t(this).addClass("uk-button-success")})},setData:function(t){var s=t.tags[this.options.keys[this.options.type].key],e=t.tags[this.options.keys[this.options.type].marge],i=t.tags[this.options.keys[this.options.type].max],r=s>=0?100*(s/i):100,a=0>s?"danger":e>=s?"warning":"success";this.options.blink&&this.setBlink(0>=s),this.progress.parent().removeClass("uk-progress-success uk-progress-warning uk-progress-danger").addClass("uk-progress-"+a),this.progress.css("width",r+"%"),this.alertEl.removeClass("uk-alert-success uk-alert-warning uk-alert-danger").addClass("uk-alert-"+a),this.alertEl.text(s+this.options.suffix)},setBlink:function(t){var s=this;t&&!this.blinker&&(this.blinker=setInterval(function(){s.blink()},this.options.blink)),!t&&this.blinker&&(clearInterval(this.blinker),this.progress.css("opacity",1),this.blinker=!1)},blink:function(){this.blinkState?this.progress.css("opacity",0):this.progress.css("opacity",1),this.blinkState=!this.blinkState},reset:function(){this.resetInput.val(0),this.resetButton.removeClass("uk-button-success")}}),t.fn.ukbixprogress}),function(t){"use strict";var s;jQuery&&jQuery.UIkit&&(s=t(jQuery,jQuery.UIkit)),"function"==typeof define&&define.amd&&define("uikit-bixtarget",["uikit"],function(){return s||t(jQuery,jQuery.UIkit)})}(function(t,s){"use strict";return s.component("bixtarget",{defaults:{},init:function(){var s=this;this.alertEl=this.find("div.uk-alert"),this.targetEl=t(".bix-target"),this.deltaEl=t(".bix-delta"),this.progressNeg=this.find("div.bix-negative div.uk-progress-bar"),this.progressPos=this.find("div.bix-positive div.uk-progress-bar"),this.resetInput=this.find("input[name=shelfReset]"),this.resetButton=this.find("button").click(function(){s.resetInput.val(1),t(this).addClass("uk-button-success")})},setData:function(t){var s=t.tags.shelf,e=t.tags.shift*(t.tags.shelfTarget/t.tags.shiftLengte),i=s-e,r=100*(Math.abs(i)/(2*t.tags.shelfMarge)),a=s>e?"success":e-t.tags.shelfMarge>s?"danger":"warning";0>i?(this.progressNeg.parent().removeClass("uk-progress-warning uk-progress-danger").addClass("uk-progress-"+a),this.progressNeg.css("width",r+"%"),this.progressPos.css("width",0)):(this.progressPos.css("width",r+"%"),this.progressNeg.css("width",0)),this.deltaEl.removeClass("uk-text-success uk-text-warning uk-text-danger").addClass("uk-text-"+a),this.alertEl.removeClass("uk-alert-success uk-alert-warning uk-alert-danger").addClass("uk-alert-"+a),this.targetEl.text(Math.round(e)),this.deltaEl.text(Math.round(i)),this.alertEl.text(s+" stuks")},reset:function(){this.resetInput.val(0),this.resetButton.removeClass("uk-button-success")}}),s.ready(function(e){t("[data-bix-target]",e).each(function(){var e=t(this);e.data("bixtarget")||s.bixtarget(e,s.Utils.options(e.attr("data-bix-target")))})}),t.fn.ukbixtarget});